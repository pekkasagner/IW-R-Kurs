<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Datenvisualisierung mit ggplot2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h2 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h3 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h4 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h5 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h6 {
  padding-top: 50px;
  margin-top: -50px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">IW-R-Kurs</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Before_We_get_Started.html">Vorab</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Kursinhalte
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Einführung.html">Einführung</a>
    </li>
    <li>
      <a href="Tidyverse.html">Tidyverse</a>
    </li>
    <li>
      <a href="ggplot.html">ggplot2</a>
    </li>
    <li>
      <a href="Mikrodatenanalyse_Workflow.html">Mikrodatenanalyse</a>
    </li>
    <li>
      <a href="Karten.html">Karten und Geodaten</a>
    </li>
    <li>
      <a href="Animationen.html">Animationen</a>
    </li>
    <li>
      <a href="Interaktive_Abbildungen.html">Interaktive Abbildungen</a>
    </li>
  </ul>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Datenvisualisierung mit ggplot2</h1>

</div>


<hr />
<div id="ziele-der-sitzung" class="section level1">
<h1>Ziele der Sitzung</h1>
<ul>
<li>Grundverständnis von ggplot2</li>
<li>Grundlagen der Datenvisualisierung</li>
<li>Anpassungsmöglichkeiten in ggplot2</li>
<li>Erstellen publikationsrefier Plots</li>
</ul>
<p><img src="ggplot_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="was-ist-ggplot2" class="section level1">
<h1>Was ist ggplot2?</h1>
<p><code>ggplot2</code> ist eines der bekanntesten und populärsten R-Pakete für Datenvisualisierung. Ursprünglich entwickelt von Hadley Wickham stellt ggplot2 eine Implementierung der &quot;Grammar of Graphics&quot; dar, die Datenvisualisierung in semantische Einheiten (wie Skalen und Ebenen) unterteilt.</p>
<p>Die &quot;Grammar of Graphics&quot; spezifiziert Bausteine, mit welchen Grafiken erstellt werden können. Diese beinhalten, in der Reihenfolge der Anwendung:</p>
<ol style="list-style-type: decimal">
<li><p>Daten (<em>Was</em> soll dargestellt werden?)</p></li>
<li><p>Mapping der Aesthetics (Was kommt auf die X- und die Y-Achse, etc.)</p></li>
<li><p>Geometrisches Objekt (<code>geom</code>) (Wie sollen die Daten dargestellt werden? Linien, Punkte, Balken, etc.)</p></li>
<li><p>Weitere <code>geoms</code> (z.B. Regressionslinie, etc.)</p></li>
<li><p>Feinschliff der Axenbeschriftungen, Skalen, etc.</p></li>
</ol>
<p>Man sieht also, dass die &quot;Grammar of Graphics&quot; und damit auch <code>ggplot2</code> ein modulares Konzept verfolgen, wo Ebenen sukzessiv übereinander gelegt werden.</p>
<p>Der wichtigste Frage, die man vor jeder Datenvisualisierung beantworten sollte: Was soll dargestellt werden? Konkreter: Was soll verglichen werden?</p>
<p>!!Hier noch mehr zu generellen Punkten bei Datenvisualisierung!!!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)

<span class="co"># Laden der Daten</span>
landkreise &lt;-
<span class="st">  </span><span class="kw">read_csv</span>(<span class="st">&#39;daten_beispiele/Landkreise_merged.csv&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>)

<span class="kw">glimpse</span>(data)</code></pre></div>
<pre><code>## function (..., list = character(), package = NULL, lib.loc = NULL, verbose = getOption(&quot;verbose&quot;), 
##     envir = .GlobalEnv, overwrite = TRUE)</code></pre>
</div>
<div id="bausteine-von-ggplot2" class="section level1">
<h1>Bausteine von ggplot2</h1>
<p>Die wichtigsten Bausteine von <code>ggplot2</code> sollen an einem Beispiel genauer erklärt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> landkreise,
       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
                     <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="kw">geom_point</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/build_plot-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Hier werden in einem einfachen Plot die ersten drei Bausteine angewandt, um einen Scatterplot vom Verhältnis der Wahlbeteiligung zur Arbeitslosenquote in den einzelnen Landkreise zu erstellen.</p>
<p>Das erste Argument in der <code>ggplot</code> Funktion <code>data</code> gibt an, welche Daten grafisch dargestellt werden sollen. Da die Daten immer in dem Format sein müssen, in welchem sie nachher im Plot erscheinen, sollte man vor erstellen des Plots darüber nachdenken, was genau dargestellt werden soll. Im Beispiel gegen wir die schon bearbeiteten Daten der <code>landkreise</code> an.</p>
<p>Der zweite Befehl umfasst das Mapping der Aesthetics. Aesthetics (<code>aes</code>) beschreiben wie die Variablen in den Daten zu visuellen Eigenschaften von <code>geoms</code> zugeordnet werden sollen. Im Beispiel sollen die Variable &quot;Wahlbeteiligung&quot; auf der x-Achse und die Variable &quot;Arbeitslosenquote&quot; auf der y-Achse dargestellt werden. Konkretere Beispiele verschiedener Aesthetics werden weiter unten erklärt.</p>
<p>Zuletzt gibt der Befehl <code>geom_point</code> an, in welcher Art die Daten dargestellt werden sollen bzw. welches geometrische Objekt genutzt werden soll. Hier gibt es eine sehr große Auswahl verschiedener <code>geom</code>, um etwa Balkendiagramme, Liniendiagramme, Boxplots, usw. zu plotten.</p>
<div id="aesthetics" class="section level2">
<h2>Aesthetics</h2>
<p>In den aesthetics <code>aes()</code> in <code>ggplot2</code> muss festgelegt werden, welche Variablen aus den Daten wie im Plot dargestellt werden sollen.</p>
<div id="size" class="section level3">
<h3>Size</h3>
<p>Zunächst soll die Größe (size) der Punkte, dem jeweiligen Wert der Variable &quot;BIP&quot; - also des BIP per capita pro Landkreis - entsprechen. Dafür wird in <code>aes()</code> neben den Variablen, die auf der x- bzw. der y-Achse dargestellt werden sollen auch die <code>size = BIP</code> gesetzt.</p>
<p>Im Unterschied zum Code oben werden hier die Daten mit der <code>%&gt;%</code> in das ggplot-Objekt weitergegeben. Das hat den Vorteil, dass etwaige Datentransformationen vorgenommen und dann direkt in <code>ggplot</code> überführt werden können.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">size =</span> BIP)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-2-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="color" class="section level3">
<h3>Color</h3>
<p>Auch die Farbe (color) kann durch Variablenwerte bestimmt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-3-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="shape" class="section level3">
<h3>Shape</h3>
<p>Zuletzt wird Beispielhaft die Form (shape) der Objekte durch die Variable &quot;Aggregat&quot; festegelt. Hier sieht man auch, dass weitere Aesthetics darüber gelagert werden können. Hier werden shape und color festgelegt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">shape =</span> Aggregat,
             <span class="dt">color =</span> Aggregat)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-4-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>In <code>ggplot2</code> gibt es eine Reihe weiterer Aesthetics, die festgelegt werden können (siehe <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">hier</a>). Hier ist zunächst wichtig, zu verstehen, dass alle</p>
</div>
<div id="aesthetics-setzen" class="section level3">
<h3>Aesthetics setzen</h3>
<p>Neben der Option, Aesthetics über den <code>aes()</code> Befehl zu mappen, kann man aesthetics auch statisch festsetzen. Im Beispiel unten wird hier die Farbe für <em>alle</em> Punkte im Diagramm festgelegt. Hier wird die Farbe also nicht von den Daten auf die Punkte gemapped sondern vom Anwender konkret festgelegt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;#2e4964&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-5-1.png" width="75%" style="display: block; margin: auto;" /> Im gleichen Stil können auch andere Aesthetics statisch festgelegt werden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;#2e4964&quot;</span>,
             <span class="dt">size =</span> <span class="dv">2</span>,
             <span class="dt">shape =</span> <span class="dv">17</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-6-1.png" width="75%" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="geoms" class="section level2">
<h2>Geoms</h2>
<p><code>geoms</code> können in <code>ggplot2</code> als Ebenen (Layers) über das vorhandene ggplot-Objekt gelegt werden. Gibt man innerhalb der <code>geoms</code> keine weiteren Aesthetics an, werden die Aesthetics aus der <code>ggplot()</code> Hauptfunktion übernommen.</p>
<div id="geom_point" class="section level3">
<h3>geom_point()</h3>
<p>Im Beispiel von oben gibt <code>geom_point()</code> an, dass die Mappings in einem Scatterplot (in Punkten) dargestellt werden sollen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-7-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="geom_line" class="section level3">
<h3>geom_line()</h3>
<p>Mit <code>geom_line()</code> können gewöhnliche Liniendiagramme erstellt werden. Im unten dargestellten Plot werden beispielthaft fünf Landkreise ausgewählt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Raumeinheit <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Elbe-Elster&quot;</span>,
                            <span class="st">&quot;Oberspreewald-Lausitz&quot;</span>,
                            <span class="st">&quot;Prignitz&quot;</span>, <span class="st">&quot;Spree-Neiße&quot;</span>,
                            <span class="st">&quot;Vogtlandkreis&quot;</span>),
         <span class="op">!</span><span class="kw">is.na</span>(Arbeitslosenquote)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Jahr,
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">col =</span> Raumeinheit)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="fl">1.0</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-8-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="geom_bar" class="section level3">
<h3>geom_bar()</h3>
<p>Auch ein Balkendiagramm lässt sich einfach mit dem <code>geom</code> <code>geom_bar()</code> erstellen. Hier wird standardmäßig <code>stat=&quot;bin&quot;</code> benutzt. Dieser Befehl setzt die Höhe jedes Balkens gleich der Anzahl an Beobachtungen pro Gruppe (wie in einem Histogramm). Da hier der Wert der y-Achse aber manuell gesetzt wird, gibt <code>stat=&quot;identity&quot;</code>, dass der Wert aus den Daten gemapped werden soll.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Raumeinheit <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Elbe-Elster&quot;</span>,
                            <span class="st">&quot;Oberspreewald-Lausitz&quot;</span>,
                            <span class="st">&quot;Prignitz&quot;</span>, <span class="st">&quot;Spree-Neiße&quot;</span>,
                            <span class="st">&quot;Vogtlandkreis&quot;</span>),
         Jahr <span class="op">==</span><span class="st"> </span><span class="dv">1998</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Raumeinheit,
             <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-9-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="geom_boxplot" class="section level3">
<h3>geom_boxplot()</h3>
<p>Ein letztes Beispiel zeigt die Erstellung eines Boxplots mit <code>geom_boxplot()</code>. Hier wird die Arbeitslosenquote pro Jahr dargetellt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Arbeitslosenquote)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Jahr, <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">group =</span> Jahr)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-10-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="weitere-geoms" class="section level3">
<h3>Weitere geoms</h3>
<p>Innerhalb der <code>ggplot2</code> Umgebung lassen sich ein Vielzahl verschiedener <code>geoms</code> implementieren. <a href="https://ggplot2.tidyverse.org/reference/">Hier</a> findet man eine Übersicht über die wichtigsten <code>geoms</code>.</p>
<hr />
</div>
</div>
<div id="kombinieren-von-geoms" class="section level2">
<h2>Kombinieren von geoms</h2>
<p>In einem mit <code>ggplot2</code> erstelltem Plot lassen sich weitere <code>geoms</code> einfach übereinander darstellen. Wichtig hierbei ist, dass jeder weitere Ebene die weiter unten liegenden Ebenen potenziell überlagert.</p>
<p>Im folgenden Beispiel wird über einen gewöhnlichen mit <code>geom_point()</code> erstellten Scatterplot mit einem weiteren <code>geom</code>, <code>geom_smooth()</code> ein Regressionlinie abgebildet. In dem Befehl <code>method = &quot;lm&quot;</code> steht &quot;lm&quot; für &quot;linear model&quot;, das eine lineare Regressionslinie umschreibt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>,
              <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-11-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Die Verbindung mehrerer <code>geoms</code> kann auch mit weiteren Aesthetics kombiniert werden. Das Beispiel unten zeigt etwa jeweils eingefärbte Punkte und Regressionslinien für kreisfreie Städte und Landkreise.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">group =</span> Aggregat,
             <span class="dt">col =</span> Aggregat)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-12-1.png" width="75%" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="themes" class="section level2">
<h2>Themes</h2>
<p>Themes in <code>ggplot2</code> beziehen sich auf alles in einem Plot, was nichts mit den Daten zu tun hat. Über <code>theme_set()</code> kann ein Theme entweder global festgelegt werden oder innerhalb eines <code>ggplot</code> Codes festgelegt werden.</p>
<p><code>ggplot2</code> beinhaltet vorinstalliert eininge Themes, die sofot genutzt werden können. Diese sind etwa <code>theme_classic()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_classic</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-13-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p><code>theme_bw()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-14-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>oder <code>theme_minimal</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>()</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-15-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Weitere vorinstallierte Themes findet man <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">hier</a>.</p>
<p>Es besteht zudem die Möglichkeit, Themes selbst nach den eigenen Vorstellungen anzupassen. Hier lassen sich alle vorstellbaren Elemente anpassen. Eine Übersicht über die jeweiligen Befehle findet sich hier <a href="https://ggplot2.tidyverse.org/reference/theme.html">hier</a>.</p>
<p>Im Beispiel unten werden neben der Schriftgröße (<code>base_size = 14</code>) mit dem zusätzlichen Befehl <code>theme()</code> weitere Anpassungen vorgenommen. Wichtig hierbei ist, dass mehrere <code>theme</code> Befehle sich gegenseitig überlagern können.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">color =</span> Durchschnittsalter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dt">base_size =</span> <span class="dv">14</span>) <span class="op">+</span>
<span class="st">  </span><span class="co"># plot.background setzt den Hintergrund hinter dem Plot fest</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;grey80&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;grey80&quot;</span>),
        <span class="co"># Hier werden die gridlines entfernt</span>
        <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(), 
        <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),
        <span class="co"># Hier wird die Legende entfernt</span>
        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-16-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="titel-und-achsenbeschriftungen" class="section level2">
<h2>Titel und Achsenbeschriftungen</h2>
<p>Auch Titel, Untertitel und Achsenbeschriftungen von Plots lassen sich in <code>ggplot2</code> einfach festelegen. Hier wird zunächst wie oben das Theme definiert. Mit dem Befehl <code>theme_update()</code> wird das aktuelle Theme weiter angepasst. Hier werden die Abstände der X- und Y-Achsenbeschriftung leicht erhöht und die Position der Überschrift auf ganz links im Plot festgelegt.</p>
<p>Über den <code>labs</code> Befehl lassen sich dann <code>x</code>-Achse <code>y</code>-Achse <code>title</code> und <code>subtitle</code> definieren.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">theme_set</span>(<span class="kw">theme_minimal</span>()) 
<span class="kw">theme_update</span>(<span class="dt">axis.title.y =</span> 
               <span class="kw">element_text</span>(<span class="dt">margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">0</span>, <span class="dt">r =</span> <span class="dv">10</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>)),
             <span class="dt">axis.title.x =</span> 
               <span class="kw">element_text</span>(<span class="dt">margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">10</span>, <span class="dt">r =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">l =</span> <span class="dv">0</span>)),
             <span class="dt">plot.title.position =</span> <span class="st">&#39;plot&#39;</span>)

landkreise <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, 
             <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;#2e4964&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Wahlbeteiligung (in%)&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote (in %)&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Verhältnis von Arbeitslosigkeit und Wahlbeteiligung&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Kreisfreie Städte und Landkreise in Deutschland (2017)&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-17-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="text" class="section level2">
<h2>Text</h2>
<p>Auch Textdaten lassen sich in <code>ggplot2</code> einfach darstellten. Hier werden mit <code>geom_text()</code> die Namen der jeweiligen Landkreise und kreisfreien Städte geplottet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, <span class="dt">y =</span> Arbeitslosenquote, <span class="dt">label =</span> Raumeinheit)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Wahlbeteiligung (in%)&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote (in %)&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Verhältnis von Arbeitslosigkeit und Wahlbeteiligung&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Kreisfreie Städte und Landkreise in Deutschland (2017)&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-18-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Zu viel Text gleichzeitig darzustellen ist allerdings nicht immer sinnvoll, da es so schnell unübersichtlich wird. Hier macht es meist mehr Sinn, Textelemente selektiver zu nutzen. Im Beispiel unten werden die fünf Städte mit dem höchsten BIP pro Kopf hervorgehoben und mit einem Label namentlich genannt.</p>
<p>Hier lassen sich auch die verschiedenen Ebenen von <code>ggplot2</code> noch einmal verdeutlichen, die übereinander gelegt werden. Hier werden zunächst alle Städte und Landkreise in grau (<code>&quot;grey80&quot;</code>) geplottet, um dann mit <code>subset</code> ein Subset der Daten (solche Beobachtanugen mit einem BIP größer 92.5) farbig darüber zu legen.</p>
<p>Der Befehl <code>geom_text_repel()</code> aus der <code>ggrepel</code> Bibilothek plottet dann die Label für dieses Subset. Durch den Beisatz &quot;repel&quot; werden die Label hier so dargestellt, dass sie nicht den eigentlichen Punkt überlagern.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;grey80&quot;</span>,
             <span class="dt">size =</span> <span class="fl">2.0</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">subset</span>(data,
                           BIP <span class="op">&gt;</span><span class="st"> </span><span class="fl">92.5</span> <span class="op">&amp;</span><span class="st"> </span>Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>),
             <span class="dt">color =</span> <span class="st">&quot;#2e4964&quot;</span>,
             <span class="dt">size =</span> <span class="fl">2.0</span>) <span class="op">+</span>
<span class="st">  </span>ggrepel<span class="op">::</span><span class="kw">geom_text_repel</span>(<span class="dt">data =</span> <span class="kw">subset</span>(data,
                                         BIP <span class="op">&gt;</span><span class="st"> </span><span class="fl">92.5</span> <span class="op">&amp;</span><span class="st"> </span>Jahr <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>),
                           <span class="kw">aes</span>(<span class="dt">label =</span> Raumeinheit),
                           <span class="dt">size =</span> <span class="fl">3.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Wahlbeteiligung (in%)&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote (in %)&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Verhältnis von Arbeitslosigkeit und Wahlbeteiligung&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Kreisfreie Städte und Landkreise in Deutschland (2017)&quot;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-19-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="facets" class="section level2">
<h2>Facets</h2>
<p>Oft gelingt es nicht, die gewünschten Informationen in einen einzelnen Plot unterzubringen. Hier bietet es sich an, Multi-Panel Plots zu erstellen. Hierfür gibt es mehere Möglichkeiten, an dieser Stelle soll der <code>facet_wrap()</code> diskutiert werden. In diesem Befehl können mit einem Tilde (<code>~</code>) die jeweiligen Variablen übergeben werden, die in verschiedenen Panels innerhalb eines Plots dargestellt werden sollen.</p>
<p>Im folgenden Beispiel wird die Wahlbeteiligung so nicht nur für ein Jahr dargestellt, sondern für alle im Datensatz verfügbaren Wahljahre. Mit dem Befehl <code>facet_wrap(~Jahr)</code> wird also für jedes Wahljahr ein eigenes Panel erzeugt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Wahlbeteiligung)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, <span class="dt">y =</span> Arbeitslosenquote)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Jahr) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Verhältnis von Wahlbeteiligung, Arbeitslosenquote und Durchschnittsalter&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Deutsche Landkreise und kreisfreie Städte (1998-2017)&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">Wahlbeteiligung&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title.position =</span> <span class="st">&#39;plot&#39;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-20-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Auch hier können wieder weitere Aestheitcs angepasst werden. Um die Grafik vom Anfang zu erzeugen, wird zusätzlich noch das Durchschnittsalter als Farbe übergeben. Der Befehel <code>scale_color_viridis_c()</code> gibt eine Farbpalette an, mit welcher die Punkte je nach Wert gefüllt werden sollen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Wahlbeteiligung)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">col =</span> Durchschnittsalter)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_viridis_c</span>(<span class="dt">direction =</span> <span class="op">-</span><span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Jahr) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Verhältnis von Wahlbeteiligung, Arbeitslosenquote und Durchschnittsalter&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Deutsche Landkreise und kreisfreie Städte (1998-2017)&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">Wahlbeteiligung&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title.position =</span> <span class="st">&#39;plot&#39;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-21-1.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="speichern-von-grafiken" class="section level2">
<h2>Speichern von Grafiken</h2>
<p>Mit <code>ggplot2</code> erstellte Plots können am einfachsten über die <code>ggsave()</code> Funktion erstellt werden. Hierfür geht man folgendermaßen vor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Wahlbeteiligung)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Wahlbeteiligung, <span class="dt">y =</span> Arbeitslosenquote,
             <span class="dt">col =</span> Durchschnittsalter)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_viridis_c</span>(<span class="dt">direction =</span> <span class="op">-</span><span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Jahr) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Verhältnis von Wahlbeteiligung, Arbeitslosenquote und Durchschnittsalter&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Deutsche Landkreise und kreisfreie Städte (1998-2017)&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">Wahlbeteiligung&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Arbeitslosenquote</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title.position =</span> <span class="st">&#39;plot&#39;</span>)</code></pre></div>
<p><img src="ggplot_files/figure-html/unnamed-chunk-22-1.png" width="75%" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Speichern des Plots</span>
<span class="kw">ggsave</span>(<span class="st">&quot;Wahlbeteiligung.pdf&quot;</span>)</code></pre></div>
<p>Der <code>ggsave()</code> Befehl übernimmt dabei automatisch den zuletzt erzeugten Plot als Objekt. Um sicherzugehen, dass der gewünschte Plot auch tatsächlich übergeben wird, kann dieser auch zunächst in einem Objekt zwischengespeichert werden und dann mit <code>ggsave(plot_object, &quot;plot_name.pdf&quot;)</code> gespeichert werden. Möchte man den Plot in einem anderen (Datei)Format speichern, bietet <code>ggsave()</code> verschiedene Optionen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Einfaches Speichern eines Plots</span>
<span class="kw">ggsave</span>(<span class="st">&quot;Wahlbeteiligung.pdf&quot;</span>)

<span class="co"># Verändern des Dateiformats</span>
<span class="kw">ggsave</span>(<span class="st">&quot;Wahlbeteiligung.png&quot;</span>)

<span class="co"># Verändern des Formats</span>
<span class="kw">ggsave</span>(<span class="st">&quot;Wahlbeteiligung.png&quot;</span>,
       <span class="dt">width =</span> <span class="dv">200</span>,
       <span class="dt">height =</span> <span class="dv">120</span>,
       <span class="dt">units =</span> <span class="st">&quot;mm&quot;</span>)

<span class="co"># Verändern der Pixeldichte</span>
<span class="kw">ggsave</span>(<span class="st">&quot;Wahlbeteiligung.png&quot;</span>,
       <span class="dt">dpi =</span> <span class="dv">300</span>)</code></pre></div>
<p>Mit RStudio lassen sich Plots alternativ auch im Plotsfenster unter &quot;Export&quot; in einem gewünschten Dateiformat und einer gewünschten Größe exportieren. Für spätere Reproduzierbarkeit sollte man diese Option aber selten nutzen.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
